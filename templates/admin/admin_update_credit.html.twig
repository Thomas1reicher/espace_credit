{% extends 'admin/admin_master_view.html.twig' %}
   {% block leftsidebaradmin %}
       {% include 'admin/_parts/admin_left_sidebar.html.twig' with {'itemsMenu': itemsMenu} %}
   {% endblock %}
   {% block contenuadmin %}
<div class="row gap-20 masonry pos-r" style="position: relative;">
	<div class="masonry-sizer col-md-12">
		<div class="bgc-white p-20 bd">
	
			
			<h4 class="c-grey-900">
				Modification d'un cr√©dit
			</h4>
			
            
			<form action="{{ path('catAdminCredit',{id: id}) }}" method="post">
			
			<div id="exTab3" class="">
				<div class="mT-30">
					<div class="tab-content clearfix">
						<div class="tab-pane active">
							<div class="row">
								<div class="col-xs-12 col-sm-12 col-md-12">
				<ul class="taux" data-index="{{ form.taux|length > 0 ? form.taux|last.vars.name + 1 : 0 }}" data-prototype='{% include 'admin/taux.html.twig' with { 'item': form.taux.vars.prototype } %}'>
            	{% for key,item in form.taux %}
                		<li class="element-input  darken-1 card-panel" id="{{ key  }}">
						 <h4 class="c-grey-900">
				Type de taux
			</h4>
                     <div class="div-input-contact"><div class="input-title-contact txt-black" style="color: grey;font-size: 15px">{{form_label(item.nom)}}</div></div>
                    <div class="div-input-contact">{{form_widget(item.nom)}}</div>
                    </li>
					<ul class="sous_taux" data-index="{{ item.sous_taux|length > 0 ? item.sous_taux|last.vars.name + 1 : 0 }}" data-prototype='{% include 'admin/sous_taux.html.twig' with { 'item': item.sous_taux.vars.prototype } %}'>
            			{% for key2,item2 in item.sous_taux %}
                			<li class="element-input  darken-1 card-panel" id="{{ key2  }}">
								<div class="div-input-contact"><div class="input-title-contact txt-black" style="color: grey;font-size: 15px">{{form_label(item2.periode_deb)}}</div></div>
								<div class="div-input-contact">{{form_widget(item2.periode_deb)}}</div>
								<div class="div-input-contact"><div class="input-title-contact txt-black" style="color: grey;font-size: 15px">{{form_label(item2.periode_fin)}}</div></div>
								<div class="div-input-contact">{{form_widget(item2.periode_fin)}}</div>
                    		</li>

                		{% endfor %}
            		</ul>
            <div class="btn-pret" style="width: 200px; height: 40px;   margin: auto;    display: flex;margin-top:5%;">
                 <a class="add_item_link btn btn-primary link-pret"  data-collection-holder-class="sous_taux">
                     <p class="demande-pret montserrat-medium-white-14px" style="color:white!important">Ajouter une Periode</p>
                 </a>
            </div>
                {% endfor %}
            </ul>
            <div class="btn-pret" style="width: 200px; height: 40px;   margin: auto;    display: flex;margin-top:5%;">
                 <a class="add_item_link btn btn-primary link-pret"  data-collection-holder-class="taux">
                     <p class="demande-pret montserrat-medium-white-14px" style="color:white!important">Ajouter un nouveau Taux</p>
                 </a>
            </div>
								</div>
							</div>
						</div>
						<div class="col-xs-12 col-sm-12 col-md-12" style="text-align: right; padding: 0;">
							<button type="submit" class="btn btn-primary">
								Modifier
							</button>
						</div>
					</div>
				</div>
			</div>
            </form>
		</div>
	</div>
</div>
<script type="text/javascript">
$(".add_item_link").click(function (e) {
	alert("test");
        const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);

        const item = document.createElement('li');

        item.innerHTML = collectionHolder
            .dataset
            .prototype
            .replace(
            /__name__/g,
            collectionHolder.dataset.index
            );

        collectionHolder.appendChild(item);

        collectionHolder.dataset.index++;
    });


</script>
   {% endblock %}
